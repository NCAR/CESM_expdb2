<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">	
	<title>CESM2 Experiment Details</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<meta http-equiv="cache-control" content="max-age=0" />
	<meta http-equiv="cache-control" content="no-cache" />
	<meta http-equiv="expires" content="0" />
	<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
	<meta http-equiv="pragma" content="no-cache" />
	<meta name="description" content="CESM2 Experiment Database"/>
	<meta name="keywords"    content="CESM Software Engineering Working Group"/>

	<style type="text/css" media="screen">
	/*@import "/styles/cesm.css";
	@import "/styles/teststyles.css";
	@import "/svnuser/css/svnuser.css";
	@import "/jqueryui/development-bundle/demos/demos.css";
	@import "/jqueryui/css/redmond/jquery-ui-1.8.23.custom.css";
	@import "/jquerydt/DataTables-1.9.3/media/css/jquery.dataTables.css";*/
	</style>
	<!--
	<link rel="stylesheet" href="https://cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css" />
	<link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.2.1/css/responsive.dataTables.min.css" />
	<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
	<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
	<script type="text/javascript" src="/expdb2.0/scripts/exp_dashboard.js"></script>
	-->

	<style>
	  #details { 
	  background-color: #c5edcb; 
	  }
	  .alert:hover {
	  cursor: pointer;
	  }
	  table {
	  width: 100%;
	  }
	  .dtr-details {
	  width: 100%;
	  }
	  table.dataTable tbody.tbody-timing td {
	  padding: 0px;
	  }
	  #wrapper {
	  	display: block;
	  }
	</style>

	[% INCLUDE 'modern/css/css-include.html' %]
	<style>
	[% INCLUDE 'modern/css/datatables.min.css' %]
	[% INCLUDE 'modern/skins/default.css' %]

		#inner-headline nav ul.dropdown-menu li a {
			color:#000;
		}

		.tab-content {
			border-left: 1px solid #ddd;
			border-right: 1px solid #ddd;
			border-bottom: 1px solid #ddd;
		}

		.tab-pane {
			
		}

		.nav-sub {
			padding: 10px;
			background-color: #3E6A9C;
		}

		.nav-sub > li > a {
			border-radius: 4px;
			color: #fff;
		}

		.nav-sub > li > a:hover {
			background-color:#fff;
			color: #000;
		}

		.tab-pane {
			/*min-height: 330px;*/
		}


		.panel-group .panel {
			border-radius: 0px;
			border-left: 0px;
			border-right: 0px;
		}

		.panel-group .panel + .panel {
			margin-top: 0px;
		}
	</style>
</head>


<body>
<div id="wrapper">
	<header>
		<div class="navbar navbar-default navbar-static-top">
			<div class="container">
				[% INCLUDE 'modern/includes/header/navbar-header.html' %]
				[% INCLUDE 'modern/includes/header/search.html' %]
				[% INCLUDE 'modern/includes/header/nsf-header.html' %]
				[% INCLUDE 'modern/includes/navigation/models-nav.html' %]
			</div>
		</div>
	</header>

	<section id="inner-headline">
		<div class="container">
			<div class="row">
				<div class="col-lg-12">
					<ul class="breadcrumb">
						<li><a href="http://www.cesm/ucar/edu/index.html"><i class="fa fa-home"></i></a><i class="icon-angle-right"></i></li>
						<li><a href="http://www.cesm.ucar.edu/models/">CESM Models</a><i class="icon-angle-right"></i></li>
						<li><a href="https://csegweb.cgd.ucar.edu/">CSEG Web Apps</a><i class="icon-angle-right"></i></li>
						<li><a href="https://csegweb.cgd.ucar.edu/expdb2.0">Experiment Database</a><i class="icon-angle-right"></i></li>
						<li class="active">Experiment Details</li>
					</ul>

					[% INCLUDE nav.tmpl %]
				</div>
			</div>
		</div>
	</section>


	<!-- content start blahblahstart -->
	<section id="content">
		<div class="container">
			<div class="row visible-sm-block text-center hidden-md hidden-lg">
				<h3>Not designed for mobile viewing, please open on a desktop</h3>
			</div>


			<div class="row hidden-sm hidden-xs">
				<div class="col-lg-12">
					<div class="post-image">
						<div class="post-heading">
							<h1>CESM2 Experiment Details</h1>
						</div>
					</div>

					<div class="post-border-bottom">
						<p>The purpose of this project is to provide a single web portal to store metadata for CESM experiments including tracking run status, viewing diagnostics, and adding publication links. You must have a valid CESM SVN developers login or a UCAS login to use the experiment database.</p>
					</div>

					<h2>[% case.casename.value %] - Experiment Detail</h2>

					<div class="panel panel-default">
						<div class="panel-heading">
							<h3 class="panel-title">CESM Case Working Title</h3>
						</div>
						<div class="panel-body">
							[% IF validstatus.message %]
							<div class="alert [% IF validstatus.status %] alert-success [% ELSE %] alert-danger [% END %] text-center" role="alert">
								<span class="">[% validstatus.message %]</span>
							</div>
							[% END %]
							<button onclick="return popitup('/expdb2.0/cgi-bin/caseTitle.cgi?case_id=[% case.case_id.value %]&action=update&expType_id=[% case.expType_id.value %]','height=200,width=800,scrollbars=yes')"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></button>[% case.title.value %]
						</div>
					</div>

					<div class="row" style="margin-bottom: 10px;">
						<div class="col-lg-12 text-center" style="padding-top: 10px;">
							<button type="button" class="btn btn-default btn-sm btn-show-exp-details">
							  <i class="fa fa-folder-open"></i> Show / Hide All
							</button>
							<small><em>&nbsp;&nbsp;&nbsp;or select an option below</em></small>
						</div>
					</div>


					[% IF expType.name == 'cmip6' %]
					<div class="panel panel-default">
						<div class="panel-heading" role="tab" id="CMIP6Header">
							<h4 class="panel-title">
							<a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion-MIP" href="#CMIP6Collapse" aria-expanded="false" aria-controls="CMIP6Collapse">
								[% case.expType_name.value %] Project Details
							</a>
							</h4>
						</div>

						<div id="CMIP6Collapse" class="panel-collapse collapse" role="tabpanel" aria-labelledby="CMIP6Header">
							<div class="panel-body">
								<div class="row">
									<div class="col-lg-6">
										<div class="alert alert-info text-center" role="alert"><strong>CMIP6 Fields</strong></div>
										<table class="table table-striped table-condensed" id="CMIP6Table">
											<thead>
												<th>Field Name</th>
												<th>Value</th>
											</thead>
											<tbody>
												[% FOREACH key IN project.keys.sort  %]
												<tr>
													<td>[% key %]</td>
													<td>[% project.$key %]</td>
												</tr>
												[% END %]
											</tbody>
										</table>
									</div>

									<div class="col-lg-6">
										<div class="alert alert-info text-center" role="alert"><strong>CMIP6 File Global Attributes</strong></div>
										<table class="table table-striped table-condensed" id="CMIP6Table">
											<thead>
												<th>Field Name</th>
												<th>Value</th>
											</thead>
											<tbody>
												[% FOREACH key IN globalAtts.keys.sort  %]
												<tr>
													<td>[% key %]</td>
													<td>[% globalAtts.$key %]</td>
												</tr>
												[% END %]
											</tbody>
										</table>
									</div>
								</div>
							</div>
						</div>
					</div>
					[% END %]

					<div class="panel panel-default">
						<div class="panel-heading" role="tab" id="statusTableHeader">
							<h4 class="panel-title">
							<a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion-MIP" href="#statusTableCollapse" aria-expanded="false" aria-controls="statusTableCollapse">
								Case Workflow Process Status
							</a>
							</h4>
						</div>

						<div id="statusTableCollapse" class="panel-collapse collapse" role="tabpanel" aria-labelledby="statusTableHeader">
							<div class="panel-body">
								<div class="row" style="margin-bottom: 10px;">
									<div class="col-lg-12 text-center" style="padding-top: 10px;">
										<button type="button" class="btn btn-default btn-sm" id="statusBtn-show-all-children">
										  <i class="fa fa-folder-open"></i> Show All
										</button>

										<button type="button" class="btn btn-default btn-sm" id="statusBtn-hide-all-children">
										  <i class="fa fa-folder-open"></i> Hide All
										</button>
									</div>
								</div>

								<table id="statusTable" class="table table-striped table-condensed small" width="100%">
									<thead>
										<tr>
											<th>Description</th>		
											<th>Process Name</th>		
											<th>Status</th>		
											<th>Model Date</th>		
											<th>Disk Path</th>		
											<th>Disk Usage</th>		
											<th>Last Update</th>		
											<th>Archive Method</th>
											<th class="none"><span class="label label-warning" style="font-weight: bold; font-size: 13px;">Status History</span></th>
										</tr>
									</thead>
									<tbody>
										[% FOREACH key IN status.keys.sort %]
										<tr>
											<td>[% status.$key.description %]</td>
											<td>[% key %]</td>
											<!--<td style="background-color:[% status.$key.color %]">[% status.$key.code %]</td>-->
											<td>
												[% IF status.$key.code == "Succeeded" %]
													<span class="label label-info">[% status.$key.code %]</span>
												[% END %]
												[% IF status.$key.code == "Unknown" %]
													<span class="label label-default">[% status.$key.code %]</span>
												[% END %]
												[% IF status.$key.code == "Started" %]
													<span class="label label-success">[% status.$key.code %]</span>
												[% END %]
												[% IF status.$key.code == "Failed" %]
													<span class="label label-danger">[% status.$key.code %]</span>
												[% END %]
											</td>
											<td>[% IF status.$key.model_date %]<pre>[% status.$key.model_date %]</pre>[% END %]</td>
											<td><small>[% status.$key.disk_path %]</small></td>
											<td>[% status.$key.disk_usage %]</td>
											<td>[% status.$key.last_update %]</td>
											<td>[% status.$key.archive_method %]</td>
											<td>
												<table class="table table-condensed table-striped" width="100%" style="background-color: #f2f2f2;">
													<thead>
														<tr id="">
															<th>Status</th>		
															<th>Model Date</th>		
															<th>Disk Path</th>		
															<th>Disk Usage</th>		
															<th>Last Update</th>		
															<th>Archive Method</th>
														</tr>
													</thead>
													<tbody class="tbody-status">
														[% FOREACH stat IN status.$key.history %]
															[% IF stat.code %]
															<tr class="tr-status">
																<!--<td style="background-color:[% stat.color %]">[% stat.code %]</td>-->
																<td>
																	[% IF stat.code == "Succeeded" %]
																		<span class="label label-info">[% stat.code %]</span>
																	[% END %]
																	[% IF stat.code == "Unknown" %]
																		<span class="label label-default">[% stat.code %]</span>
																	[% END %]
																	[% IF stat.code == "Started" %]
																		<span class="label label-success">[% stat.code %]</span>
																	[% END %]
																	[% IF stat.code == "Failed" %]
																		<span class="label label-danger">[% stat.code %]</span>
																	[% END %]
																</td>
																<td>[% IF stat.model_date %]<pre>[% stat.model_date %]</pre>[% END %]</td>
																<td>[% stat.disk_path %]</td>
																<td>[% stat.disk_usage %]</td>
																<td>[% stat.last_update %]</td>
																<td>[% stat.archive_method %]</td>
															</tr>
															[% END %]
														[% END %]
													</tbody>
												</table>
											</td>
										</tr>
										[% END %]
									</tbody>
									<tfoot>
										<tr>
											<th>Description</th>		
											<th>Process Name</th>		
											<th>Status</th>		
											<th>Model Date</th>		
											<th>Disk Path</th>		
											<th>Disk Usage</th>		
											<th>Last Update</th>		
											<th>Archive Method</th>
											<th class="none">Status History</th>
										</tr>
									</tfoot>
								</table>
							</div>
						</div>
					</div>

					<div class="panel panel-default">
						<div class="panel-heading" role="tab" id="caseTableHeader">
							<h4 class="panel-title">
							<a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion-MIP" href="#caseTableCollapse" aria-expanded="false" aria-controls="caseTableCollapse">
								Caseroot Settings
							</a>
							</h4>
						</div>

						<div id="caseTableCollapse" class="panel-collapse collapse" role="tabpanel" aria-labelledby="caseTableHeader">
							<div class="panel-body">
								<div class="row" style="margin-bottom: 10px;">
									<div class="col-lg-12 text-center" style="padding-top: 10px;">
										<button type="button" class="btn btn-default btn-sm" id="caseBtn-show-all-children">
										  <i class="fa fa-folder-open"></i> Show All
										</button>

										<button type="button" class="btn btn-default btn-sm" id="caseBtn-hide-all-children">
										  <i class="fa fa-folder-open"></i> Hide All
										</button>
									</div>
								</div>

								<table id="caseTable" class="table table-striped table-condensed" width="100%">
									<thead>
										<tr>
											<th>Case Field Name</th>		
											<th>Field Value</th>		
											<th class="none"><span class="label label-warning" style="font-weight: bold; font-size: 13px;">Change History</span></th>		
										</tr>
									</thead>
									<tbody>
										[% FOREACH key IN case.keys.sort %]
										<tr>
											<td>[% key %]</td>
											[% IF key == "svn_repo_url"%]
											<td><a href="[% case.$key.value %]" target="_blank">[% case.$key.value %]</a></td>
											[% ELSE %]
											<td>[% case.$key.value %]</td>
											[% END %]
											<td>
												<table class="table table-condensed table-striped" width="100%" style="background-color: #f2f2f2;">
													<thead>
														<tr id="">
															<th>Field Value</th>
															<th>Last Update</th>
														</tr>
													</thead>
													<tbody>
														[% FOREACH change IN case.$key.history %]
														<tr>
															<td>[% change.field_value %]</td>
															<td>[% change.last_update %]</td>
														</tr>
														[% END %]
													</tbody>
												</table>
											</td>
										</tr>
										[% END %]
									</tbody>
									<tfoot>
										<tr>
											<th>Case Field Name</th>		
											<th>Field Value</th>		
											<th class="none">Change History</th>		
										</tr>
									</tfoot>
								</table>
							</div>
						</div>
					</div>

					<div class="panel panel-default">
						<div class="panel-heading" role="tab" id="caseNotesHeader">
							<h4 class="panel-title">
							<a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion-MIP" href="#caseNotesCollapse" aria-expanded="false" aria-controls="caseNotesCollapse">
								Case Notes
							</a>
							</h4>
						</div>

						<div id="caseNotesCollapse" class="panel-collapse collapse" role="tabpanel" aria-labelledby="caseNotesHeader">
							<div class="panel-body">
								<table class="table table-condensed table-striped">
									<tr>
										<td valign="top">
											<button onclick="return popitup('/expdb2.0/cgi-bin/caseNotes.cgi?case_id=[% case.case_id.value %]&expType_id=[% case.expType_id.value %]','height=200,width=800,scrollbars=yes')">
												<span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
											</button> Case Notes:
										</td>
										<td>
											<table class="table table-condensed">
												<thead>
													<th></th>		
													<th>Note</th>		
													<th>User</th>		
													<th>Last Update</th>		
												</thead>
												[% FOREACH n IN notes %]
												<tr>
													<td valign="top">
														<button onclick="return popitup('/expdb2.0/cgi-bin/caseNotes.cgi?case_id=[% case.case_id.value %]&note_id=[% n.note_id %]&action=update&expType_id=[% case.expType_id.value %]','height=200,width=800,scrollbars=yes')">
															<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
														</button>
													</td>
													<td><pre>[% n.note %]</pre></td>
													<td valign="top">[% n.firstname %] [% n.lastname %] ([% n.email %]) </td>
													<td valign="top">[% n.last_update %]</td>
												</tr>
												[% END %]
											</table>
										</td>
									</tr>
								</table>
							</div>
						</div>
					</div>

					<div class="panel panel-default">
						<div class="panel-heading" role="tab" id="caseLinksHeader">
							<h4 class="panel-title">
							<a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion-MIP" href="#caseLinksCollapse" aria-expanded="false" aria-controls="caseLinksCollapse">
								Case Diagnostics and Climate Data Gateway Links
							</a>
							</h4>
						</div>

						<div id="caseLinksCollapse" class="panel-collapse collapse" role="tabpanel" aria-labelledby="caseLinksHeader">
							<div class="panel-body">
								<table class="table table-striped table-condensed">
									<tr>
										<td valign="top">
											<button onclick="return popitup('/expdb2.0/cgi-bin/caseLinks.cgi?case_id=[% case.case_id.value %]&expType_id=[% case.expType_id.value %]','height=300,width=800,scrollbars=yes')">
												<span class="glyphicon glyphicon-plus" aria-hidden="true">
											</button> Case Links:
										</td>
										<td>
											<table class="table table-condensed">
												[% FOREACH lk IN links %]
												<thead>
													<th></th>
													<th>Process</th>		
													<th>Link Type</th>		
													<th>Link</th>		
													<th>Last Update</th>		
												</thead>
												<tr>
													<td>
														<button onclick="return popitup('/expdb2.0/cgi-bin/caseLinks.cgi?case_id=[% case.case_id.value %]&link_id=[% lk.link_id %]&action=update&expType_id=[% case.expType_id.value %]','height=300,width=800,scrollbars=yes')">
															<span class="glyphicon glyphicon-pencil" aria-hidden="true">
														</button>
													</td>
													<td>[% lk.process_name %]</td>
													<td>[% lk.linkType_name %]</td>
													[% http = lk.link %]
													[% IF lk.linkType_id == 1 %]
													<td><a href="[% lk.link %]" target="_blank">[% lk.link %]</a></td>
													[% ELSE %]
													<td>[% lk.link %]</td>
													[% END %]
													<td>[% lk.last_update %]</td>
												</tr>
												<tr>
													<td colspan="5"><b>Description</b></td>
												</tr>
												<tr>
													<td colspan="5">[% lk.description %]</td>
												</tr>
												[% END %]
											</table>
										</td>
									</tr>
								</table>
							</div>
						</div>
					</div>

					<div class="panel panel-default">
						<div class="panel-heading" role="tab" id="publicationsHeader">
							<h4 class="panel-title">
							<a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion-MIP" href="#publicationsCollapse" aria-expanded="false" aria-controls="publicationsCollapse">
								Publication Options
							</a>
							</h4>
						</div>

						<div id="publicationsCollapse" class="panel-collapse collapse" role="tabpanel" aria-labelledby="publicationsHeader">
							<div class="panel-body">
								<p style="font-size: .8em">* You must be the scientific lead or archiver for this experiment or a expdb2.0 admin in order to publish. After successful publication, it is up to the user to delete any intermediate files associated with this experiment on disk. Clicking on any of the options below
								will bring up a separate window with options for publication or a current status of a publication request. <br/>
								PUBLICATION OPTIONS ARE COMING SOON!</p>

								<p style="font-size: .9em">
								<button onclick="return popitup('/expdb2.0/cgi-bin/publishESGF.cgi?case_id=[% case.case_id.value %]&expType_id=[% case.expType_id.value %]','height=300,width=800,scrollbars=yes')"><b>Publish Request to ESGF</b></button> &nbsp;&nbsp; 
								<button onclick="return popitup('/expdb2.0/cgi-bin/updateESGF.cgi?case_id=[% case.case_id.value %]&expType_id=[% case.expType_id.value %]','height=300,width=800,scrollbars=yes')"><b>Update Status of ESGF</b></button><br/> - Publish the Conformed compressed timeseries netCDF files to the ESGF and the CDG.</p>

								<p style="font-size: .9em"><button onclick="return popitup('/expdb2.0/cgi-bin/publishCDG.cgi?case_id=[% case.case_id.value %]','height=300,width=800,scrollbars=yes')"><b>CDG</b></button><br/> -  Publish to NCAR Climate Data Gateway (formally ESG). This publishes the single-variable CESM compressed timeseries netCDF files.</p>

								<p style="font-size: .9em"><button onclick="return popitup('/expdb2.0/cgi-bin/publishDASH.cgi?case_id=[% case.case_id.value %]&expType_id=[% case.expType_id.value %]','height=300,width=800,scrollbars=yes')"><b>DASH</b></button><br/> -  Publish experiment metadata to the NCAR <a href="https://data.ucar.edu/">Digital Assets Services Hub</a></p>

								<p style="font-size: .9em"><button onclick="return popitup('/expdb2.0/cgi-bin/publishScience.cgi?case_id=[% case.case_id.value %]&expType_id=[% case.expType_id.value %]','height=300,width=800,scrollbars=yes')"><b>CESM2 Science</b></button><br/> -  Publish experiment metadata and public links to diagnostics pages to the <a href="http://www.cesm.ucar.edu/models/cesm2/scientifically-validated-cesm2.html">CESM2 Scientifically Validated web page.</a></p>

								<p style="font-size: .9em"><button onclick="return popitup('/expdb2.0/cgi-bin/publishTiming.cgi?case_id=[% case.case_id.value %]&expType_id=[% case.expType_id.value %]','height=300,width=800,scrollbars=yes')"><b>CESM2 Timing</b></button><br/> -  Publish experiment detailed timing information to the <a href="https://csegweb.cgd.ucar.edu/timing/cgi-bin/timings.cgi">CESM2 Timing, Performance, and Load Balancing Data</a></p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>
	<!-- content end -->

<!-- footer start -->
<footer>        
	[% INCLUDE 'modern/includes/footer/footer-inc.html' %]
</footer>
<!-- footer end -->

<a href="#" class="scrollup"><i class="fa fa-angle-up active"></i></a>

[% INCLUDE 'modern/js/js-include.html' %]

<!--
<script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/responsive/2.2.1/js/dataTables.responsive.min.js"></script>
-->

<script>
[% INCLUDE 'modern/js/datatables.min.js' %]

var statusTable = $('#statusTable').DataTable({
	"responsive": true,
	"lengthMenu": [ [25, 50, -1], [25, 50, "All"] ],
	"order": [ [ 0, 'asc'] ]
});

// Handle click on "Expand All" button
$('button#statusBtn-show-all-children').on('click', function(){
// Expand row details
statusTable.rows(':not(.parent)').nodes().to$().find('td:first-child').trigger('click');
});

// Handle click on "Collapse All" button
$('button#statusBtn-hide-all-children').on('click', function(){
// Collapse row details
statusTable.rows('.parent').nodes().to$().find('td:first-child').trigger('click');
});



var caseTable = $('#caseTable').DataTable( {
	"responsive": true,
	"lengthMenu": [ [-1, 25, 50], ["All", 25, 50] ],
	"order": [ [ 0, 'asc'] ]
} );

// Handle click on "Expand All" button
$('button#caseBtn-show-all-children').on('click', function(){
// Expand row details
caseTable.rows(':not(.parent)').nodes().to$().find('td:first-child').trigger('click');
});

// Handle click on "Collapse All" button
$('button#caseBtn-hide-all-children').on('click', function(){
// Collapse row details
caseTable.rows('.parent').nodes().to$().find('td:first-child').trigger('click');
});
</script>

<script type="text/javascript" src="/expdb2.0/scripts/popitup.js"></script>

</div>








<!-- old content start -->
<!--
<p>
[% INCLUDE header.tmpl %]
</p>

<span>
	<div class="body">
	<h1>[% case.casename.value %] - Experiment Detail</h1>

	<h2>CESM Case Working Title:</h2>
	<table>
	<tr>
	<td valign="top"><button onclick="return popitup('/expdb2.0/cgi-bin/caseTitle.cgi?case_id=[% case.case_id.value %]&action=update&expType_id=[% case.expType_id.value %]','height=200,width=800,scrollbars=yes')"><span class="ui-icon ui-icon-pencil"></span></button></td>
	<td>[% case.title.value %]</td>
	</tr>
	<tr>
	<td colspan="2">
	[% IF validstatus %]
	<div id="msgbox" [% IF validstatus.status %] style="color:green" [% ELSE %] style="color:red" [% END %]>
	[% validstatus.message %]
	</div>
	</td>
	</tr>
	[% END %]
	</table>

	<br/>
	<a class="show-all-exp-details show-hide">show all</a>
	<br/>
	<br/>
</span>


<div class="expDetail_accordion expDetail_applying">
<div id="expDetail_accordion">

<span>
	[% IF expType.name == 'cmip6' %]
	<h3>[% case.expType_name.value %] Project Details</h3>
	<div id="expDetail_table">

	<table class="noborder">
	<tr>
	<td valign="top">
	<table class="bordered">
	<thead>
	<th colspan="2">CMIP6 Fields</th>
	</thead>
	<thead>
	<th>Field Name</th>		
	<th>Value</th>		
	</thead>
	[% FOREACH key IN project.keys.sort  %]
	<tr>
	<td>[% key %]</td>
	<td>[% project.$key %]</td>
	</tr>
	[% END %]
	</table>
	</td>

	<td valign="top">
	<table class="bordered">
	<thead>
	<th colspan="2">CMIP6 File Global Attributes</th>
	</thead>
	<thead>
	<th>Field Name</th>		
	<th>Value</th>		
	</thead>
	[% FOREACH key IN globalAtts.keys.sort  %]
	<tr>
	<td>[% key %]</td>
	<td>[% globalAtts.$key %]</td>
	</tr>
	[% END %]
	</table>
	</td>
	</tr>
	</table>
	</div>
	[% END %]
</span>

<span>
	<h3>Case Workflow Process Status</h3>
	<div id="expDetail_table">
	<div style="text-align: center;" id="statusTable_buttons">
	<button id="statusBtn-show-all-children" class="btn btn-primary" type="button">Expand All</button>
	<button id="statusBtn-hide-all-children" class="btn btn-primary" type="button">Collapse All</button>
	</div>

	<table id="statusTable" style="width: 100%">
	<thead>
	<tr>
	<th>Description</th>		
	<th>Process Name</th>		
	<th>Status</th>		
	<th>Model Date</th>		
	<th>Disk Path</th>		
	<th>Disk Usage</th>		
	<th>Last Update</th>		
	<th>Archive Method</th>
	<th class="none">Status History</th>
	</tr>
	</thead>
	<tbody>
	[% FOREACH key IN status.keys.sort %]
	<tr>
	<td>[% status.$key.description %]</td>
	<td>[% key %]</td>
	<td style="background-color:[% status.$key.color %]">[% status.$key.code %]</td>
	<td><pre>[% status.$key.model_date %]</pre></td>
	<td>[% status.$key.disk_path %]</td>
	<td>[% status.$key.disk_usage %]</td>
	<td>[% status.$key.last_update %]</td>
	<td>[% status.$key.archive_method %]</td>
	<td>
	<table>
	<thead>
	<tr id="details">
	<th>Status</th>		
	<th>Model Date</th>		
	<th>Disk Path</th>		
	<th>Disk Usage</th>		
	<th>Last Update</th>		
	<th>Archive Method</th>
	</tr>
	</thead>
	<tbody class="tbody-status">
	[% FOREACH stat IN status.$key.history %]
	<tr class="tr-status">
	<td style="background-color:[% stat.color %]">[% stat.code %]</td>
	<td><pre>[% stat.model_date %]</pre></td>
	<td>[% stat.disk_path %]</td>
	<td>[% stat.disk_usage %]</td>
	<td>[% stat.last_update %]</td>
	<td>[% stat.archive_method %]</td>
	</tr>
	[% END %]
	</tbody>
	</table>
	</td>
	</tr>
	[% END %]
	</tbody>
	<tfoot>
	<tr>
	<th>Description</th>		
	<th>Process Name</th>		
	<th>Status</th>		
	<th>Model Date</th>		
	<th>Disk Path</th>		
	<th>Disk Usage</th>		
	<th>Last Update</th>		
	<th>Archive Method</th>
	<th class="none">Status History</th>
	</tr>
	</tfoot>
	</table>
	</div>
</span>


<span>
	<h3>Caseroot Settings</h3>
	<div id="expDetail_table">
	<div style="text-align: center;" id="caseTable_buttons">
	<button id="caseBtn-show-all-children" class="btn btn-primary" type="button">Expand All</button>
	<button id="caseBtn-hide-all-children" class="btn btn-primary" type="button">Collapse All</button>
	</div>

	<table id="caseTable" style="width: 100%">
	<thead>
	<tr>
	<th>Case Field Name</th>		
	<th>Field Value</th>		
	<th class="none">Change History</th>		
	</tr>
	</thead>
	<tbody>
	[% FOREACH key IN case.keys.sort %]
	<tr>
	<td>[% key %]</td>
	[% IF key == "svn_repo_url"%]
	<td><a href="[% case.$key.value %]" target="_blank">[% case.$key.value %]</a></td>
	[% ELSE %]
	<td>[% case.$key.value %]</td>
	[% END %]
	<td>
	<table>
	<thead>
	<tr id="details">
	<th>Field Value</th>
	<th>Last Update</th>
	</tr>
	</thead>
	<tbody>
	[% FOREACH change IN case.$key.history %]
	<tr>
	<td>[% change.field_value %]</td>
	<td>[% change.last_update %]</td>
	</tr>
	[% END %]
	</tbody>
	</table>
	</td>
	</tr>
	[% END %]
	</tbody>
	<tfoot>
	<tr>
	<th>Case Field Name</th>		
	<th>Field Value</th>		
	<th class="none">Change History</th>		
	</tr>
	</tfoot>
	</table>
	</div>
</span>

<span>
	<h3>Case Notes</h3>
	<div id="expDetail_table">
	<table class="bordered">
	<tr>
	<td valign="top"> <button onclick="return popitup('/expdb2.0/cgi-bin/caseNotes.cgi?case_id=[% case.case_id.value %]&expType_id=[% case.expType_id.value %]','height=200,width=800,scrollbars=yes')"><span class="ui-icon ui-icon-plus"></span></button> Case Notes:</td>
	<td>
	<table>
	<thead>
	<th></th>		
	<th>Note</th>		
	<th>User</th>		
	<th>Last Update</th>		
	</thead>
	[% FOREACH n IN notes %]
	<tr>
	<td valign="top"><button onclick="return popitup('/expdb2.0/cgi-bin/caseNotes.cgi?case_id=[% case.case_id.value %]&note_id=[% n.note_id %]&action=update&expType_id=[% case.expType_id.value %]','height=200,width=800,scrollbars=yes')"><span class="ui-icon ui-icon-pencil"></span></button></td>
	<td><pre>[% n.note %]</pre></td>
	<td valign="top">[% n.firstname %] [% n.lastname %] ([% n.email %]) </td>
	<td valign="top">[% n.last_update %]</td>
	</tr>
	[% END %]
	</table>
	</td>
	</tr>
	</table>
	</div>
</span>

<h3>Case Diagnostics and Climate Data Gateway Links</h3>
<div id="expDetail_table">
<table class="bordered">
<tr>
<td valign="top"><button onclick="return popitup('/expdb2.0/cgi-bin/caseLinks.cgi?case_id=[% case.case_id.value %]&expType_id=[% case.expType_id.value %]','height=300,width=800,scrollbars=yes')"><span class="ui-icon ui-icon-plus"></span></button> Case Links:</td>
<td>
<table>
[% FOREACH lk IN links %]
<thead>
<th></th>
<th>Process</th>		
<th>Link Type</th>		
<th>Link</th>		
<th>Last Update</th>		
</thead>
<tr>
<td><button onclick="return popitup('/expdb2.0/cgi-bin/caseLinks.cgi?case_id=[% case.case_id.value %]&link_id=[% lk.link_id %]&action=update&expType_id=[% case.expType_id.value %]','height=300,width=800,scrollbars=yes')"><span class="ui-icon ui-icon-pencil"></span></button></td>
<td>[% lk.process_name %]</td>
<td>[% lk.linkType_name %]</td>
[% http = lk.link %]
[% IF lk.linkType_id == 1 %]
<td><a href="[% lk.link %]" target="_blank">[% lk.link %]</a></td>
[% ELSE %]
<td>[% lk.link %]</td>
[% END %]
<td>[% lk.last_update %]</td>
</tr>
<tr>
<td colspan="5"><b>Description</b></td>
</tr>
<tr>
<td colspan="5">[% lk.description %]</td>
</tr>
[% END %]
</table>
</td>
</tr>
</table>
</div>

<h3>Publication Options</h3>
<div>
<p style="font-size: .8em">* You must be the scientific lead or archiver for this experiment or a expdb2.0 admin in order to publish. After successful publication, it is up to the user to delete any intermediate files associated with this experiment on disk. Clicking on any of the options below
will bring up a separate window with options for publication or a current status of a publication request. <br/>
PUBLICATION OPTIONS ARE COMING SOON!</p>

<p style="font-size: .9em">
<button onclick="return popitup('/expdb2.0/cgi-bin/publishESGF.cgi?case_id=[% case.case_id.value %]&expType_id=[% case.expType_id.value %]','height=300,width=800,scrollbars=yes')"><b>Publish Request to ESGF</b></button> &nbsp;&nbsp; 
<button onclick="return popitup('/expdb2.0/cgi-bin/updateESGF.cgi?case_id=[% case.case_id.value %]&expType_id=[% case.expType_id.value %]','height=300,width=800,scrollbars=yes')"><b>Update Status of ESGF</b></button><br/> - Publish the Conformed compressed timeseries netCDF files to the ESGF and the CDG.</p>

<p style="font-size: .9em"><button onclick="return popitup('/expdb2.0/cgi-bin/publishCDG.cgi?case_id=[% case.case_id.value %]','height=300,width=800,scrollbars=yes')"><b>CDG</b></button><br/> -  Publish to NCAR Climate Data Gateway (formally ESG). This publishes the single-variable CESM compressed timeseries netCDF files.</p>

<p style="font-size: .9em"><button onclick="return popitup('/expdb2.0/cgi-bin/publishDASH.cgi?case_id=[% case.case_id.value %]&expType_id=[% case.expType_id.value %]','height=300,width=800,scrollbars=yes')"><b>DASH</b></button><br/> -  Publish experiment metadata to the NCAR <a href="https://data.ucar.edu/">Digital Assets Services Hub</a></p>

<p style="font-size: .9em"><button onclick="return popitup('/expdb2.0/cgi-bin/publishScience.cgi?case_id=[% case.case_id.value %]&expType_id=[% case.expType_id.value %]','height=300,width=800,scrollbars=yes')"><b>CESM2 Science</b></button><br/> -  Publish experiment metadata and public links to diagnostics pages to the <a href="http://www.cesm.ucar.edu/models/cesm2/scientifically-validated-cesm2.html">CESM2 Scientifically Validated web page.</a></p>

<p style="font-size: .9em"><button onclick="return popitup('/expdb2.0/cgi-bin/publishTiming.cgi?case_id=[% case.case_id.value %]&expType_id=[% case.expType_id.value %]','height=300,width=800,scrollbars=yes')"><b>CESM2 Timing</b></button><br/> -  Publish experiment detailed timing information to the <a href="https://csegweb.cgd.ucar.edu/timing/cgi-bin/timings.cgi">CESM2 Timing, Performance, and Load Balancing Data</a></p>
</div>
</div>
</div>
</div>
-->
<!-- old content end -->
</body>
</html>