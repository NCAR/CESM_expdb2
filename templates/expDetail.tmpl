<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
        <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<head>
  <title>CESM2.0 Experiments Database</title>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
   <meta http-equiv="cache-control" content="max-age=0" />
   <meta http-equiv="cache-control" content="no-cache" />
   <meta http-equiv="expires" content="0" />
   <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
   <meta http-equiv="pragma" content="no-cache" />
   <meta name="description" content="CESM2.0 Experiments Database"/>
   <meta name="keywords"    content="CESM Software Engineering Working Group"/>
   <style type="text/css" media="screen">
     @import "/styles/cesm.css"; 
     @import "/styles/teststyles.css";
     @import "/svnuser/css/svnuser.css";
     @import "/jqueryui/development-bundle/demos/demos.css";
     @import "/jqueryui/css/redmond/jquery-ui-1.8.23.custom.css";
     @import "/jquerydt/DataTables-1.9.3/media/css/jquery.dataTables.css";
   </style>
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
   <script src="https://code.jquery.com/ui/1.8.23/jquery-ui.min.js" type="text/javascript"></script>
   <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
   <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
   <script type="text/javascript" language="javascript" src="/scripts/jquery.dataTables.js"></script>
   <script  type="text/javascript" src="/scripts/exp_dashboard.js"></script>  
   <script type="text/javascript" src="/scripts/popitup.js"></script>
   <script  type="text/javascript">
     $(document).ready(function()
     {
        $("tr:even").css("background-color", "#E3E4E6");
     });
   </script>

</head>

<body style="text-align: left">
  <p>
    [% INCLUDE header.tmpl %]
  </p>

  <div id="wrap"><!-- begin wrap -->
    <div align="center">
    <h1>[% case.casename %] - Experiment Detail</h1>

    [% IF validstatus %]
    <div id="msgbox" [% IF validstatus.status %] style="color:green" [% ELSE %] style="color:red"
	 [% END %]>
      [% validstatus.message %]
      <br>
    </div>
    [% END %]

    <div align="center">
      <h2>Case Process Status and Project Details</h2>

      <table width="65%">
	<thead>
	  <th>Case Process Status</th>
	  <th>Project Details</th>
	</thead>
	<tr valign="top">
	  <td class="block">
	    <table border=".5" cellpadding="2px" cellspacing="2px">
	      <thead>
		<th>Description</th>		
		<th>Process Name</th>		
		<th>Status</th>		
		<th>Last Update</th>		
	      </thead>
	      [% FOREACH key IN status.keys.sort %]
	      <tr>
		<td>[% status.$key.description %]</td>
		<td>[% key %]</td>
		<td style="background-color:[% status.$key.color %]">[% status.$key.code %]</td>
		<td>[% status.$key.last_update %]</td>
	      </tr>
	      [% END %]
	    </table>
	  </td>
	  <td></td>	  
	</tr>
      </table>

    </div>

    <br/><br/>

    <div align="center">
      <h2>Case Details</h2>
      <span class="textred">Only users associated with this experiment may update details.</span>

     <form method="POST" action="/exp2.0/cgi-bin/expList.cgi">
      <input type="hidden" name="action" value="expUpdate"/>
      <input type="hidden" name="id" value="[% case.id %]"></input>
	<table width="95%" border=".5" cellpadding="2px" cellspacing="2px">
	  <thead>
	    <th>Case Field Name</th>		
	    <th>Case Field Value(s)</th>
	  </thead>
	  <tr>
	    <td>Case Name (CASE):</td>
	    <td>[% case.casename %]
	      [% IF fields.defined(casename) %]
	      <br/>History of field changes:
	         [% FOREACH pair IN fields.pairs %]
	            <br/>[% pair.field_value %] (updated: [% pair.last_update %]
	         [% END %]
	      [% END %]
	    </td>
	  </tr>
	  <tr>
	    <td>Title:</td>
	    <td><input name="title" value="[% case.title %]" type="text"></input></td>
	  </tr>
	  <tr>
	    <td>Caseroot (CASEROOT):</td>
	    <td>[% case.caseroot %]</td>
	  </tr>
	  <tr>
	    <td>Compiler (COMPILER):</td>
	    <td>[% case.compiler %]</td>
	  </tr>
	  <tr>
	    <td>Component Set (COMPSET):</td>
	    <td>[% case.compset %]</td>
	  </tr>
	  <tr>
	    <td>Short Term Archive Location (DOUT_S_ROOT):</td>
	    <td>[% case.dout_s_root %]</td>
	  </tr>
	  <tr>
	    <td>Experiment Type:</td>
	    <td>[% case.expType_name %] - [% case.expType_desc %]</td>
	  </tr>
	  <tr>
	    <td>Grid (GRID):</td>
	    <td>[% case.grid %]</td>
	  </tr>
	  <tr>
	    <td>Job Queue (JOB_QUEUE):</td>
	    <td>[% case.job_queue %]</td>
	  </tr>
	  <tr>
	    <td>Job Wallclock Time (JOB_WALLCLOCK):</td>
	    <td>[% case.job_time %]</td>
	  </tr>
	  <tr>
	    <td>Machine (MACH):</td>
	    <td>[% case.machine %]</td>
	  </tr>
	  <tr>
	    <td>Model (MODEL):</td>
	    <td>[% case.model %]</td>
	  </tr>
	  <tr>
	    <td>Model Version (MODEL_VERSION):</td>
	    <td>[% case.model_version %]</td>
	  </tr>
	  <tr>
	    <td>MPI Library (MPILIB):</td>
	    <td>[% case.mpilib %]</td>
	  </tr>
	  <tr>
	    <td>Project (PROJECT):</td>
	    <td>[% case.project %]</td>
	  </tr>
	  <tr>
	    <td>SVN Caseroot Repository Link:</td>
	    <td><a href="[% case.svn_repo_url %]" target="_blank">[% case.svn_repo_url %]</a></td>
	  </tr>
	  <tr>
	    <td>Initial Archive Date:</td>
	    <td>[% case.archive_date %]</td>
	  </tr>
	  <tr>
	    <td>Restart Frequency (REST_N):</td>
	    <td>[% case.rest_n %]</td>
	  </tr>
	  <tr>
	    <td>Restart Option (REST_OPTION):</td>
	    <td>[% case.rest_option %]</td>
	  </tr>
	  <tr>
	    <td>Run Directory (RUNDIR):</td>
	    <td>[% case.run_dir %]</td>
	  </tr>
	  <tr>
	    <td>Run Reference Case (RUN_REFCASE):</td>
	    <td>[% case.run_refcase %]</td>
	  </tr>
	  <tr>
	    <td>Run Reference Date (RUN_REFDATE):</td>
	    <td>[% case.run_refdate %]</td>
	  </tr>
	  <tr>
	    <td>Run Start Date (STARTDATE):</td>
	    <td>[% case.run_startdate %]</td>
	  </tr>
	  <tr>
	    <td>Run Type (RUNTYPE):</td>
	    <td>[% case.run_type %]</td>
	  </tr>
	  <tr>
	    <td>Case User Name (USER):</td>
	    <td>[% case.caseuser %]</td>
	  </tr>
	  <tr>
	    <td>Scientific User:</td>
	    <td>[% case.runscientifc_id %]</td>
	  </tr>
	  <tr>
	    <td>Stop Frequency (STOP_N):</td>
	    <td>[% case.stop_n %]</td>
	  </tr>
	  <tr>
	    <td>Stop Option (STOP_OPTION):</td>
	    <td>[% case.stop_option %]</td>
	  </tr>
	  <tr>
	    <td>Case Notes:</td>
	    <td>TODO Loop</td>
	  </tr>
	  <tr>
	    <td>Diagnostics Links:</td>
	    <td>TODO Loop</td>
	  </tr>
	  <tr>
	    <td>ESG Links:</td>
	    <td>TODO Loop</td>
	  </tr>
	  <tr style="text-align:center; background-color:#DFEFFC">
	    <td colspan="2" style="text-align:center; background-color:#DFEFFC">
	      <input type="submit" name="Submit" value="Save Changes to Experiment"/>
	      <input type="reset">
	      <input type="button" name="DSET" value="TODO Publish to DSET"/>
	    </td>
	  </tr>
	</table>
      </form>

      <br/><br/>
  </div>
  </div>

</body>
</html>
